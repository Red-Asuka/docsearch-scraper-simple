name: 'Update Algolia Index'
description: 'Update Algolia Index'
inputs:
  algolia_application_id:
    description: 'Algolia Application ID'
    required: true

  algolia_api_key:
    description: 'Algolia Api Key'
    required: true

  docs_type:
    description: 'Docs Type'
    required: true

  docs_version:
    description: 'Docs Version'
    required: true

outputs:
  result:
    description: 'Result'
    value: '{}'

runs:
  using: "composite"
  steps:
    - shell: bash
      env:
        APPLICATION_ID: ${{ inputs.algolia_application_id }}
        API_KEY: ${{ inputs.algolia_api_key }}
      run: |
        python -m pip install --upgrade pipenv wheel
        cd ${{ github.action_path }}
        pipenv install --keep-outdated
        pipenv run python -m src.index config ${{ inputs.docs_type }} ${{ inputs.docs_version }}
